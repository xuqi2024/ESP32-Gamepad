# ESP32-Gamepad å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šå®‰è£…ESP-IDFç¯å¢ƒ

### 1.1 ä¸‹è½½å¹¶å®‰è£…ESP-IDF

```bash
# åˆ›å»ºESPå¼€å‘ç›®å½•
mkdir -p ~/esp
cd ~/esp

# å…‹éš†ESP-IDFä»“åº“ï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
git clone --recursive https://github.com/espressif/esp-idf.git

# è¿›å…¥ESP-IDFç›®å½•
cd esp-idf

# åˆ‡æ¢åˆ°ç¨³å®šç‰ˆæœ¬v5.1.2
git checkout v5.1.2
git submodule update --init --recursive

# å®‰è£…å·¥å…·é“¾
./install.sh esp32

# è®¾ç½®ç¯å¢ƒå˜é‡
. ./export.sh
```

### 1.2 éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥ESP-IDFç‰ˆæœ¬
idf.py --version

# é¢„æœŸè¾“å‡ºï¼š
# ESP-IDF v5.1.2
```

### 1.3 è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰

æ¯æ¬¡æ–°æ‰“å¼€ç»ˆç«¯éƒ½éœ€è¦æ‰§è¡Œï¼š
```bash
cd ~/esp/esp-idf
. ./export.sh
```

æˆ–è€…å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ `~/.zshrc` æ–‡ä»¶ä¸­ï¼š
```bash
echo 'alias get_idf=". ~/esp/esp-idf/export.sh"' >> ~/.zshrc
source ~/.zshrc
```

ç„¶åæ¯æ¬¡åªéœ€è¦è¿è¡Œï¼š
```bash
get_idf
```

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å’Œçƒ§å½•é¡¹ç›®

### 2.1 é…ç½®é¡¹ç›®

```bash
cd /Users/xuqi/Proj/ESP32-Gamepad

# è®¾ç½®ç›®æ ‡èŠ¯ç‰‡ï¼ˆESP32ï¼‰
idf.py set-target esp32

# é…ç½®é¡¹ç›®ï¼ˆå¯é€‰ï¼Œä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
idf.py menuconfig
```

### 2.2 ç¼–è¯‘é¡¹ç›®

```bash
# æ¸…ç†ä¹‹å‰çš„æ„å»ºï¼ˆå¦‚æœæœ‰ï¼‰
idf.py clean

# ç¼–è¯‘é¡¹ç›®
idf.py build
```

### 2.3 è¿æ¥ESP32å¹¶çƒ§å½•

```bash
# æŸ¥çœ‹å¯ç”¨ä¸²å£
ls /dev/cu.*

# çƒ§å½•åˆ°ESP32ï¼ˆæ›¿æ¢PORTä¸ºå®é™…ç«¯å£ï¼‰
idf.py -p /dev/cu.usbserial-0001 flash

# ç›‘æ§ä¸²å£è¾“å‡º
idf.py -p /dev/cu.usbserial-0001 monitor
```

## ğŸ“± ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•åŸºç¡€åŠŸèƒ½

### 3.1 é¢„æœŸè¾“å‡º

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥åœ¨ä¸²å£ç›‘æ§ä¸­çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
I (123) MAIN: ===============================================
I (124) MAIN: ESP32 Gamepad Controller Starting...
I (125) MAIN: Version: 1.0.0
I (126) MAIN: Build Date: Jul  7 2025 10:30:00
I (127) MAIN: ===============================================
I (128) MAIN: NVS Flash initialized
I (129) MAIN: Bluetooth initialized
I (130) GAMEPAD_CTRL: Initializing gamepad controller...
I (131) GAMEPAD_CTRL: Gamepad input task started
I (132) GAMEPAD_CTRL: Control output task started
I (133) GAMEPAD_CTRL: Gamepad controller initialized successfully
I (134) MAIN: System initialization completed
I (135) MAIN: System is ready for gamepad connection...
```

### 3.2 é€€å‡ºç›‘æ§

æŒ‰ `Ctrl+]` é€€å‡ºä¸²å£ç›‘æ§ã€‚

## ğŸ® ç¬¬å››æ­¥ï¼šè¿æ¥è“ç‰™æ‰‹æŸ„ï¼ˆå¾…å®ç°ï¼‰

ç›®å‰é¡¹ç›®å·²ç»å»ºç«‹äº†åŸºç¡€æ¡†æ¶ï¼Œä¸‹ä¸€æ­¥å°†å®ç°ï¼š
1. è“ç‰™HIDåè®®æ”¯æŒ
2. æ‰‹æŸ„é…å¯¹å’Œæ•°æ®è§£æ
3. è®¾å¤‡æ§åˆ¶åŠŸèƒ½

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šESP-IDFç¯å¢ƒå˜é‡æœªè®¾ç½®
**ç—‡çŠ¶**: `idf.py: command not found`
**è§£å†³**: æ‰§è¡Œ `. ~/esp/esp-idf/export.sh`

### é—®é¢˜2ï¼šä¸²å£æƒé™é”™è¯¯
**ç—‡çŠ¶**: `Permission denied: '/dev/cu.usbserial-xxx'`
**è§£å†³**: ç¡®ä¿ESP32æ­£ç¡®è¿æ¥ï¼Œå°è¯•ä¸åŒçš„USBç«¯å£

### é—®é¢˜3ï¼šç¼–è¯‘é”™è¯¯
**ç—‡çŠ¶**: å„ç§ç¼–è¯‘é”™è¯¯
**è§£å†³**: ç¡®ä¿ESP-IDFç‰ˆæœ¬æ­£ç¡®ï¼Œè¿è¡Œ `idf.py clean` åé‡æ–°ç¼–è¯‘

### é—®é¢˜4ï¼šæ‰¾ä¸åˆ°ä¸²å£
**ç—‡çŠ¶**: æ²¡æœ‰ `/dev/cu.usbserial-*` è®¾å¤‡
**è§£å†³**: 
1. æ£€æŸ¥ESP32è¿æ¥
2. å®‰è£…CH340/CP2102é©±åŠ¨ç¨‹åº
3. å°è¯•å…¶ä»–USBçº¿ç¼†

## ğŸ“š ä¸‹ä¸€æ­¥å¼€å‘

1. **è“ç‰™HIDå®ç°** - å®ç°æ‰‹æŸ„è¿æ¥å’Œæ•°æ®è§£æ
2. **è®¾å¤‡æ§åˆ¶** - æ·»åŠ å°è½¦å’Œé£æœºæ§åˆ¶é€»è¾‘
3. **éœ‡åŠ¨åé¦ˆ** - å®ç°éœ‡åŠ¨åŠŸèƒ½
4. **é…ç½®ç®¡ç†** - æ·»åŠ å‚æ•°é…ç½®åŠŸèƒ½

---

*æ›´æ–°æ—¶é—´ï¼š2025å¹´7æœˆ7æ—¥*
